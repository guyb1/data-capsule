{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///frame.bundle.min.js","webpack:///webpack/bootstrap 8f88642739b52e52ccd6","webpack:///./base-storage.js","webpack:///./utils/constants.js","webpack:///../node_modules/message-channel/dist/src/utils.js","webpack:///../node_modules/message-channel/dist/src/constants.js","webpack:///../node_modules/greedy-split/dist/src/index.js","webpack:///./data-capsule.js","webpack:///./strategies/frame-storage.js","webpack:///../node_modules/message-channel/connect.js","webpack:///../node_modules/message-channel/dist/src/connect/connect.js","webpack:///../node_modules/message-channel/dist/src/connect/send-factory.js","webpack:///../node_modules/uuid/v4.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///./global-frame.js","webpack:///./frame.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","window","__STATICS_BASE_URL__","document","style","getElementById","createElement","id","head","appendChild","textContent","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","BaseStorage","_this","forEach","method","Error","value","options","strategy","toError","str","values","errors","find","err","message","NOT_FOUND","SERVER_ERROR","PREFIX_SEPARATOR","KEY_SEPARATOR","STORAGE_PREFIX","CONNECTION_MAX_TIMEOUT","parseConnectionMessage","constructConnectionMessage","parseChannelMessage","constructChannelMessage","undefined","_constants","payload","messageDelimiter","firstDelimiterIndex","indexOf","slice","scope","connectionRequestMsg","connectionSuccessMsg","deafultConnectionMaxTimeout","deafultMessageMaxTimeout","greedySplit","separator","limit","result","split","join","reduce","x","separatorLength","match","shift","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","validateNamespace","namespace","buildValidadateOptions","capsuleOptions","assign","DataCapsule","_BaseStorage","_ref","getPrototypeOf","storageStrategy","verify","_options","setItem","getItem","removeItem","getAllItems","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","Array","isArray","connectMessageChannel","_require","FrameStorageStrategy","origin","token","channel","_this2","Promise","resolve","connectionMaxTimeout","then","params","_this3","data","getChannel","sendToChannel","JSON","stringify","e","_greedySplit","_greedySplit2","status","parse","_len","arguments","_key","sendCommand","_len2","_key2","_len3","_key3","_len4","_key4","connect","_options$targetOrigin","targetOrigin","_options$connectionMa","_options$messageMaxTi","messageMaxTimeout","reject","setTimeout","MessageChannel","port1","onmessage","_sendFactory2","default","connectionMessage","_utils","parent","postMessage","port2","_sendFactory","obj","sendFactory","port","messages","_parseChannelMessage","modifiedEvent","lastEventId","source","ports","transferList","messageId","_v2","packaged","_v","v4","buf","offset","rnds","random","rng","ii","bytesToUuid","global","crypto","msCrypto","getRandomValues","rnds8","Uint8Array","r","Math","g","Function","eval","bth","byteToHex","toString","substr","dataCapsuleTools","DataCapsuleTools"],"mappings":"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","file":"frame.bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"data-capsule\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"data-capsule\"] = factory();\n\telse\n\t\troot[\"data-capsule\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"data-capsule\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"data-capsule\"] = factory();\n\telse\n\t\troot[\"data-capsule\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t__webpack_require__.p = typeof window !== 'undefined' && window.__STATICS_BASE_URL__ || __webpack_require__.p;\n/******/\n/******/ \tif (typeof document !== 'undefined') {\n/******/ \t    var style = document.getElementById(\"frame.stylable.bundle.css\");\n/******/ \t    if(!style){\n/******/ \t        style = document.createElement('style');\n/******/ \t        style.id = \"frame.stylable.bundle.css\";\n/******/ \t        document.head.appendChild(style);\n/******/ \t    }\n/******/ \t    style.textContent = \"\";\n/******/ \t}\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 52);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseStorage = function () {\n  function BaseStorage() {\n    var _this = this;\n\n    _classCallCheck(this, BaseStorage);\n\n    ['setItem', 'getItem', 'removeItem', 'getAllItems'].forEach(function (method) {\n      if (_this[method] === BaseStorage.prototype[method]) {\n        throw new Error('BaseStorage method [' + method + '] must be overriden!');\n      }\n    });\n  }\n\n  _createClass(BaseStorage, [{\n    key: 'setItem',\n    value: function setItem(key, value, options) {\n      throw options;\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem(key, options) {\n      throw options;\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key, options) {\n      throw options;\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems(options) {\n      throw options;\n    }\n  }], [{\n    key: 'verify',\n    value: function verify(strategy) {\n      if (strategy instanceof BaseStorage) {\n        return strategy;\n      } else {\n        throw new Error('This class must extend BaseStorage!');\n      }\n    }\n  }]);\n\n  return BaseStorage;\n}();\n\nmodule.exports = BaseStorage;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar errors = {\n  NOT_FOUND: new Error('Key was not found in capsule'),\n  SERVER_ERROR: new Error('Failed to perform operarion on server')\n};\n\nfunction toError(str) {\n  return Object.values(errors).find(function (err) {\n    return err.message === str;\n  }) || str;\n}\n\nmodule.exports = {\n  PREFIX_SEPARATOR: '|',\n  KEY_SEPARATOR: '#',\n  STORAGE_PREFIX: 'capsule',\n  NOT_FOUND: errors.NOT_FOUND,\n  CONNECTION_MAX_TIMEOUT: 1000,\n  SERVER_ERROR: errors.SERVER_ERROR,\n  toError: toError\n};\n\n/***/ }),\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseConnectionMessage = exports.constructConnectionMessage = exports.parseChannelMessage = exports.constructChannelMessage = undefined;\n\nvar _constants = __webpack_require__(4);\n\nvar constructChannelMessage = exports.constructChannelMessage = function constructChannelMessage(payload, id) {\n  if (!id) {\n    return payload;\n  }\n\n  return id + _constants.messageDelimiter + payload;\n};\n\nvar parseChannelMessage = exports.parseChannelMessage = function parseChannelMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1) {\n    return { id: null, payload: message };\n  }\n\n  var id = message.slice(0, firstDelimiterIndex);\n  var payload = message.slice(firstDelimiterIndex + 1);\n  return { id: id, payload: payload };\n};\n\nvar constructConnectionMessage = exports.constructConnectionMessage = function constructConnectionMessage(scope) {\n  return _constants.connectionRequestMsg + _constants.messageDelimiter + scope;\n};\n\nvar parseConnectionMessage = exports.parseConnectionMessage = function parseConnectionMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1 || message.slice(0, firstDelimiterIndex) !== _constants.connectionRequestMsg) {\n    throw new Error('Invalid connection message');\n  }\n\n  var scope = message.slice(firstDelimiterIndex + 1);\n  return scope;\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar connectionRequestMsg = exports.connectionRequestMsg = 'req_con';\nvar connectionSuccessMsg = exports.connectionSuccessMsg = 'connection_success';\nvar messageDelimiter = exports.messageDelimiter = '|';\nvar deafultConnectionMaxTimeout = exports.deafultConnectionMaxTimeout = 200;\nvar deafultMessageMaxTimeout = exports.deafultMessageMaxTimeout = 5000;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction greedySplit(str, separator, limit) {\n  var result = str.split(separator, limit);\n  if (result.length === limit) {\n    var length = 0;\n    if (typeof separator === 'string') {\n      length = result.join(separator).length;\n    } else {\n      length = result.reduce(function (l, x, i) {\n        var separatorLength = 0;\n        if (i + 1 < limit) {\n          separatorLength = str.slice(l).match(separator).shift().length;\n        }\n        return l + x.length + separatorLength;\n      }, 0);\n    }\n    result[limit - 1] += str.slice(length);\n  }\n  return result;\n}\n\nmodule.exports = greedySplit;\n//# sourceMappingURL=index.js.map\n\n\n/***/ }),\n/* 6 */,\n/* 7 */,\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BaseStorage = __webpack_require__(0);\n\nfunction validateNamespace(options) {\n  if (!options.namespace) {\n    throw new Error('namespace is required');\n  } else if (typeof options.namespace !== 'string') {\n    throw new Error('namespace should be a string');\n  }\n}\n\nfunction buildValidadateOptions(capsuleOptions, options) {\n  options = Object.assign({}, capsuleOptions, options);\n  validateNamespace(options);\n  return options;\n}\n\nvar DataCapsule = function (_BaseStorage) {\n  _inherits(DataCapsule, _BaseStorage);\n\n  function DataCapsule(_ref) {\n    var strategy = _ref.strategy,\n        namespace = _ref.namespace,\n        scope = _ref.scope;\n\n    _classCallCheck(this, DataCapsule);\n\n    var _this = _possibleConstructorReturn(this, (DataCapsule.__proto__ || Object.getPrototypeOf(DataCapsule)).call(this));\n\n    _this.storageStrategy = BaseStorage.verify(strategy);\n    _this._options = { namespace: namespace, scope: scope };\n    return _this;\n  }\n\n  _createClass(DataCapsule, [{\n    key: 'setItem',\n    value: function setItem(key, value, options) {\n      options = buildValidadateOptions(this._options, options);\n      return this.storageStrategy.setItem(key, value, options);\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem(key, options) {\n      options = buildValidadateOptions(this._options, options);\n      return this.storageStrategy.getItem(key, options);\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key, options) {\n      options = buildValidadateOptions(this._options, options);\n      return this.storageStrategy.removeItem(key, options);\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems(options) {\n      options = buildValidadateOptions(this._options, options);\n      return this.storageStrategy.getAllItems(options);\n    }\n  }]);\n\n  return DataCapsule;\n}(BaseStorage);\n\nmodule.exports = DataCapsule;\n\n/***/ }),\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar greedySplit = __webpack_require__(5);\nvar connectMessageChannel = __webpack_require__(15);\nvar BaseStorage = __webpack_require__(0);\n\nvar _require = __webpack_require__(1),\n    CONNECTION_MAX_TIMEOUT = _require.CONNECTION_MAX_TIMEOUT;\n\nvar FrameStorageStrategy = function (_BaseStorage) {\n  _inherits(FrameStorageStrategy, _BaseStorage);\n\n  function FrameStorageStrategy(target, origin, token) {\n    _classCallCheck(this, FrameStorageStrategy);\n\n    var _this = _possibleConstructorReturn(this, (FrameStorageStrategy.__proto__ || Object.getPrototypeOf(FrameStorageStrategy)).call(this));\n\n    _this.target = target;\n    _this.origin = origin;\n    _this.token = token;\n    _this.channel;\n    return _this;\n  }\n\n  _createClass(FrameStorageStrategy, [{\n    key: 'getChannel',\n    value: function getChannel() {\n      var _this2 = this;\n\n      if (this.channel) {\n        return Promise.resolve(this.channel);\n      }\n\n      return connectMessageChannel('data-capsule', { target: this.target, origin: this.origin, connectionMaxTimeout: CONNECTION_MAX_TIMEOUT }).then(function (channel) {\n        _this2.channel = channel;\n        return channel;\n      });\n    }\n  }, {\n    key: 'sendCommand',\n    value: function sendCommand(method, params) {\n      var _this3 = this;\n\n      var payload = { data: params };\n\n      return this.getChannel().then(function (sendToChannel) {\n        var message = [_this3.token, method, JSON.stringify(payload)].join('|');\n\n        return sendToChannel(message).then(function (e) {\n          var _greedySplit = greedySplit(e.data, '|', 2),\n              _greedySplit2 = _slicedToArray(_greedySplit, 2),\n              status = _greedySplit2[0],\n              payload = _greedySplit2[1];\n\n          if (status === 'reject') {\n            throw payload;\n          }\n\n          return JSON.parse(payload).data;\n        });\n      });\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem() {\n      for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {\n        params[_key] = arguments[_key];\n      }\n\n      return this.sendCommand('setItem', params);\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem() {\n      for (var _len2 = arguments.length, params = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        params[_key2] = arguments[_key2];\n      }\n\n      return this.sendCommand('getItem', params);\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem() {\n      for (var _len3 = arguments.length, params = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        params[_key3] = arguments[_key3];\n      }\n\n      return this.sendCommand('removeItem', params);\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems() {\n      for (var _len4 = arguments.length, params = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        params[_key4] = arguments[_key4];\n      }\n\n      return this.sendCommand('getAllItems', params);\n    }\n  }]);\n\n  return FrameStorageStrategy;\n}(BaseStorage);\n\nmodule.exports = FrameStorageStrategy;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(16);\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _constants = __webpack_require__(4);\n\nvar _utils = __webpack_require__(3);\n\nvar _sendFactory = __webpack_require__(17);\n\nvar _sendFactory2 = _interopRequireDefault(_sendFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction connect(scope) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$targetOrigin = options.targetOrigin,\n      targetOrigin = _options$targetOrigin === undefined ? '*' : _options$targetOrigin,\n      _options$connectionMa = options.connectionMaxTimeout,\n      connectionMaxTimeout = _options$connectionMa === undefined ? _constants.deafultConnectionMaxTimeout : _options$connectionMa,\n      _options$messageMaxTi = options.messageMaxTimeout,\n      messageMaxTimeout = _options$messageMaxTi === undefined ? _constants.deafultMessageMaxTimeout : _options$messageMaxTi;\n\n\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      reject(new Error('max timeout of ' + connectionMaxTimeout + 'ms exceeded'));\n    }, connectionMaxTimeout);\n\n    var channel = new window.MessageChannel();\n\n    channel.port1.onmessage = function (e) {\n      if (e.data === _constants.connectionSuccessMsg) {\n        return resolve((0, _sendFactory2.default)(channel.port1, { messageMaxTimeout: messageMaxTimeout }));\n      } else {\n        reject(new Error('connection could not establise'));\n      }\n    };\n\n    var connectionMessage = (0, _utils.constructConnectionMessage)(scope);\n    window.parent.postMessage(connectionMessage, targetOrigin, [channel.port2]);\n  });\n}\n\nmodule.exports = connect;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sendFactory;\n\nvar _utils = __webpack_require__(3);\n\nvar _v = __webpack_require__(18);\n\nvar _v2 = _interopRequireDefault(_v);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sendFactory(port, options) {\n  var messageMaxTimeout = options.messageMaxTimeout;\n\n  var messages = {};\n\n  port.onmessage = function (e) {\n    var _parseChannelMessage = (0, _utils.parseChannelMessage)(e.data),\n        id = _parseChannelMessage.id,\n        payload = _parseChannelMessage.payload;\n\n    if (messages[id]) {\n      var modifiedEvent = {\n        data: payload,\n        origin: e.origin,\n        lastEventId: e.lastEventId,\n        source: e.source,\n        ports: e.ports\n      };\n\n      messages[id](modifiedEvent);\n    }\n  };\n\n  return function (message, transferList) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        reject(new Error('max timeout of ' + messageMaxTimeout + 'ms exceeded'));\n      }, messageMaxTimeout);\n\n      var messageId = (0, _v2.default)();\n      var packaged = (0, _utils.constructChannelMessage)(message, messageId);\n      messages[messageId] = resolve;\n      return port.postMessage(packaged, transferList);\n    });\n  };\n}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(19);\nvar bytesToUuid = __webpack_require__(21);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(20)))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* global window */\n\n\nvar dataCapsuleTools = __webpack_require__(53);\n\nif (typeof window !== 'undefined') {\n  window.DataCapsuleTools = dataCapsuleTools;\n}\n\nmodule.exports = dataCapsuleTools;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar FrameStorageStrategy = __webpack_require__(14);\n\nvar _require = __webpack_require__(1),\n    NOT_FOUND = _require.NOT_FOUND;\n\nvar BaseStorage = __webpack_require__(0);\nvar DataCapsule = __webpack_require__(8);\n\nmodule.exports = {\n  NOT_FOUND: NOT_FOUND,\n  BaseStorage: BaseStorage,\n  DataCapsule: DataCapsule,\n  FrameStorageStrategy: FrameStorageStrategy\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// frame.bundle.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t__webpack_require__.p = typeof window !== 'undefined' && window.__STATICS_BASE_URL__ || __webpack_require__.p;\n\n \tif (typeof document !== 'undefined') {\n \t    var style = document.getElementById(\"frame.stylable.bundle.css\");\n \t    if(!style){\n \t        style = document.createElement('style');\n \t        style.id = \"frame.stylable.bundle.css\";\n \t        document.head.appendChild(style);\n \t    }\n \t    style.textContent = \"\";\n \t}\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 52);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8f88642739b52e52ccd6","'use strict';\n\nclass BaseStorage {\n  constructor() {\n    ['setItem', 'getItem', 'removeItem', 'getAllItems'].forEach(method => {\n      if (this[method] === BaseStorage.prototype[method]) {\n        throw new Error(`BaseStorage method [${method}] must be overriden!`);\n      }\n    });\n  }\n\n  setItem(key, value, options) {\n    throw options;\n  }\n\n  getItem(key, options) {\n    throw options;\n  }\n\n  removeItem(key, options) {\n    throw options;\n  }\n\n  getAllItems(options) {\n    throw options;\n  }\n\n  static verify(strategy) {\n    if (strategy instanceof BaseStorage) {\n      return strategy;\n    } else {\n      throw new Error(`This class must extend BaseStorage!`);\n    }\n  }\n}\n\nmodule.exports = BaseStorage;\n\n\n\n// WEBPACK FOOTER //\n// ./base-storage.js","const errors = {\n  NOT_FOUND: new Error('Key was not found in capsule'),\n  SERVER_ERROR: new Error('Failed to perform operarion on server')\n};\n\nfunction toError(str) {\n  return Object.values(errors).find(err => err.message === str) || str;\n}\n\nmodule.exports = {\n  PREFIX_SEPARATOR: '|',\n  KEY_SEPARATOR: '#',\n  STORAGE_PREFIX: 'capsule',\n  NOT_FOUND: errors.NOT_FOUND,\n  CONNECTION_MAX_TIMEOUT: 1000,\n  SERVER_ERROR: errors.SERVER_ERROR,\n  toError,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/constants.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseConnectionMessage = exports.constructConnectionMessage = exports.parseChannelMessage = exports.constructChannelMessage = undefined;\n\nvar _constants = require('./constants');\n\nvar constructChannelMessage = exports.constructChannelMessage = function constructChannelMessage(payload, id) {\n  if (!id) {\n    return payload;\n  }\n\n  return id + _constants.messageDelimiter + payload;\n};\n\nvar parseChannelMessage = exports.parseChannelMessage = function parseChannelMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1) {\n    return { id: null, payload: message };\n  }\n\n  var id = message.slice(0, firstDelimiterIndex);\n  var payload = message.slice(firstDelimiterIndex + 1);\n  return { id: id, payload: payload };\n};\n\nvar constructConnectionMessage = exports.constructConnectionMessage = function constructConnectionMessage(scope) {\n  return _constants.connectionRequestMsg + _constants.messageDelimiter + scope;\n};\n\nvar parseConnectionMessage = exports.parseConnectionMessage = function parseConnectionMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1 || message.slice(0, firstDelimiterIndex) !== _constants.connectionRequestMsg) {\n    throw new Error('Invalid connection message');\n  }\n\n  var scope = message.slice(firstDelimiterIndex + 1);\n  return scope;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/utils.js\n// module id = 3\n// module chunks = 0 1 2","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar connectionRequestMsg = exports.connectionRequestMsg = 'req_con';\nvar connectionSuccessMsg = exports.connectionSuccessMsg = 'connection_success';\nvar messageDelimiter = exports.messageDelimiter = '|';\nvar deafultConnectionMaxTimeout = exports.deafultConnectionMaxTimeout = 200;\nvar deafultMessageMaxTimeout = exports.deafultMessageMaxTimeout = 5000;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/constants.js\n// module id = 4\n// module chunks = 0 1 2","'use strict';\n\nfunction greedySplit(str, separator, limit) {\n  var result = str.split(separator, limit);\n  if (result.length === limit) {\n    var length = 0;\n    if (typeof separator === 'string') {\n      length = result.join(separator).length;\n    } else {\n      length = result.reduce(function (l, x, i) {\n        var separatorLength = 0;\n        if (i + 1 < limit) {\n          separatorLength = str.slice(l).match(separator).shift().length;\n        }\n        return l + x.length + separatorLength;\n      }, 0);\n    }\n    result[limit - 1] += str.slice(length);\n  }\n  return result;\n}\n\nmodule.exports = greedySplit;\n//# sourceMappingURL=index.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/greedy-split/dist/src/index.js\n// module id = 5\n// module chunks = 0 1 2","'use strict';\n\nconst BaseStorage = require('./base-storage');\n\nfunction validateNamespace(options) {\n  if (!options.namespace) {\n    throw new Error('namespace is required');\n  } else if (typeof options.namespace !== 'string') {\n    throw new Error('namespace should be a string');\n  }\n}\n\nfunction buildValidadateOptions(capsuleOptions, options) {\n  options = Object.assign({}, capsuleOptions, options);\n  validateNamespace(options);\n  return options;\n}\n\nclass DataCapsule extends BaseStorage {\n  constructor({strategy, namespace, scope}) {\n    super();\n    this.storageStrategy = BaseStorage.verify(strategy);\n    this._options = {namespace, scope};\n  }\n\n  setItem(key, value, options) {\n    options = buildValidadateOptions(this._options, options);\n    return this.storageStrategy.setItem(key, value, options);\n  }\n\n  getItem(key, options) {\n    options = buildValidadateOptions(this._options, options);\n    return this.storageStrategy.getItem(key, options);\n  }\n\n  removeItem(key, options) {\n    options = buildValidadateOptions(this._options, options);\n    return this.storageStrategy.removeItem(key, options);\n  }\n\n  getAllItems(options) {\n    options = buildValidadateOptions(this._options, options);\n    return this.storageStrategy.getAllItems(options);\n  }\n}\n\nmodule.exports = DataCapsule;\n\n\n\n// WEBPACK FOOTER //\n// ./data-capsule.js","'use strict';\n\nconst greedySplit = require('greedy-split');\nconst connectMessageChannel = require('message-channel/connect');\nconst BaseStorage = require('../base-storage');\nconst {CONNECTION_MAX_TIMEOUT} = require('../utils/constants');\n\nclass FrameStorageStrategy extends BaseStorage {\n  constructor(target, origin, token) {\n    super();\n    this.target = target;\n    this.origin = origin;\n    this.token = token;\n    this.channel;\n  }\n\n  getChannel() {\n    if (this.channel) {\n      return Promise.resolve(this.channel);\n    }\n\n    return connectMessageChannel('data-capsule', {target: this.target, origin: this.origin, connectionMaxTimeout: CONNECTION_MAX_TIMEOUT})\n      .then(channel => {\n        this.channel = channel;\n        return channel;\n      });\n  }\n\n  sendCommand(method, params) {\n    const payload = {data: params};\n\n    return this.getChannel()\n      .then(sendToChannel => {\n        const message = [this.token, method, JSON.stringify(payload)].join('|');\n\n        return sendToChannel(message)\n          .then(e => {\n            const [status, payload] = greedySplit(e.data, '|', 2);\n            if (status === 'reject') {\n              throw payload;\n            }\n\n            return JSON.parse(payload).data;\n          });\n      });\n  }\n\n  setItem(...params) {\n    return this.sendCommand('setItem', params);\n  }\n\n  getItem(...params) {\n    return this.sendCommand('getItem', params);\n  }\n\n  removeItem(...params) {\n    return this.sendCommand('removeItem', params);\n  }\n\n  getAllItems(...params) {\n    return this.sendCommand('getAllItems', params);\n  }\n}\n\nmodule.exports = FrameStorageStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ./strategies/frame-storage.js","module.exports = require('./dist/src/connect/connect');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/connect.js\n// module id = 15\n// module chunks = 0 1","'use strict';\n\nvar _constants = require('../constants');\n\nvar _utils = require('../utils');\n\nvar _sendFactory = require('./send-factory');\n\nvar _sendFactory2 = _interopRequireDefault(_sendFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction connect(scope) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$targetOrigin = options.targetOrigin,\n      targetOrigin = _options$targetOrigin === undefined ? '*' : _options$targetOrigin,\n      _options$connectionMa = options.connectionMaxTimeout,\n      connectionMaxTimeout = _options$connectionMa === undefined ? _constants.deafultConnectionMaxTimeout : _options$connectionMa,\n      _options$messageMaxTi = options.messageMaxTimeout,\n      messageMaxTimeout = _options$messageMaxTi === undefined ? _constants.deafultMessageMaxTimeout : _options$messageMaxTi;\n\n\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      reject(new Error('max timeout of ' + connectionMaxTimeout + 'ms exceeded'));\n    }, connectionMaxTimeout);\n\n    var channel = new window.MessageChannel();\n\n    channel.port1.onmessage = function (e) {\n      if (e.data === _constants.connectionSuccessMsg) {\n        return resolve((0, _sendFactory2.default)(channel.port1, { messageMaxTimeout: messageMaxTimeout }));\n      } else {\n        reject(new Error('connection could not establise'));\n      }\n    };\n\n    var connectionMessage = (0, _utils.constructConnectionMessage)(scope);\n    window.parent.postMessage(connectionMessage, targetOrigin, [channel.port2]);\n  });\n}\n\nmodule.exports = connect;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/connect/connect.js\n// module id = 16\n// module chunks = 0 1","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sendFactory;\n\nvar _utils = require('../utils');\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sendFactory(port, options) {\n  var messageMaxTimeout = options.messageMaxTimeout;\n\n  var messages = {};\n\n  port.onmessage = function (e) {\n    var _parseChannelMessage = (0, _utils.parseChannelMessage)(e.data),\n        id = _parseChannelMessage.id,\n        payload = _parseChannelMessage.payload;\n\n    if (messages[id]) {\n      var modifiedEvent = {\n        data: payload,\n        origin: e.origin,\n        lastEventId: e.lastEventId,\n        source: e.source,\n        ports: e.ports\n      };\n\n      messages[id](modifiedEvent);\n    }\n  };\n\n  return function (message, transferList) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        reject(new Error('max timeout of ' + messageMaxTimeout + 'ms exceeded'));\n      }, messageMaxTimeout);\n\n      var messageId = (0, _v2.default)();\n      var packaged = (0, _utils.constructChannelMessage)(message, messageId);\n      messages[messageId] = resolve;\n      return port.postMessage(packaged, transferList);\n    });\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/connect/send-factory.js\n// module id = 17\n// module chunks = 0 1","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/v4.js\n// module id = 18\n// module chunks = 0 1","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/lib/rng-browser.js\n// module id = 19\n// module chunks = 0 1","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/webpack/buildin/global.js\n// module id = 20\n// module chunks = 0 1","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/lib/bytesToUuid.js\n// module id = 21\n// module chunks = 0 1","/* global window */\n'use strict';\nconst dataCapsuleTools = require('./frame');\n\nif (typeof window !== 'undefined') {\n  window.DataCapsuleTools = dataCapsuleTools;\n}\n\nmodule.exports = dataCapsuleTools;\n\n\n\n// WEBPACK FOOTER //\n// ./global-frame.js","'use strict';\n\nconst FrameStorageStrategy = require('./strategies/frame-storage');\nconst {NOT_FOUND} = require('./utils/constants');\nconst BaseStorage = require('./base-storage');\nconst DataCapsule = require('./data-capsule');\n\nmodule.exports = {\n  NOT_FOUND,\n  BaseStorage,\n  DataCapsule,\n  FrameStorageStrategy\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frame.js"],"sourceRoot":""}